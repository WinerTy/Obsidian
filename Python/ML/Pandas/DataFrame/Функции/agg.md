Метод `agg` (сокращение от "aggregate") в библиотеке [[Pandas]] используется для применения одной или нескольких агрегирующих функций к [[DataFrame]] или [[Series]]. Этот метод позволяет выполнять различные статистические операции, такие как суммирование, среднее значение, минимум, максимум и другие, по одному или нескольким столбцам.

### Параметры метода `agg`:

- `func`: Функция или список функций, которые будут применены. Может быть именем функции, списком имен функций или словарем, где ключи — это имена столбцов, а значения — функции или списки функций.
    
- `axis`: Ось, по которой производится агрегация (`0` для строк, `1` для столбцов).
    
- `*args`: Дополнительные аргументы, которые будут переданы в функции.
    
- `**kwargs`: Дополнительные именованные аргументы, которые будут переданы в функции.
    

Использование `agg` позволяет гибко применять агрегирующие функции к данным, что может быть очень полезно для анализа и обобщения информации.

```python
import pandas as pd

# Создаем DataFrame
data = {
    'A': [1, 2, 3, 4],
    'B': [4, 5, 6, 7],
    'C': [7, 8, 9, 10]
}

df = pd.DataFrame(data)

print("Исходный DataFrame:")
print(df)
result = df.agg('sum')
print("Результат после применения sum:")
print(result)
# Для определенной колонки: Допустим колонки A 
result_2 = df.agg(['sum', 'mean'])['A']
print(result_2)
```

Вывод №1
```bash
Исходный DataFrame:
   A  B   C
0  1  4   7
1  2  5   8
2  3  6   9
3  4  7  10
```
Вывод #2
```bash
Результат после применения sum:
A    10
B    22
C    34
dtype: int64
```


## Пример 2
### Указываем методы агрегации для колонок

**agg()** позволяет Вам передавать словарь, в котором ключи словаря это названия колонок, а значения словаря это методы агрегации для этих колонок.

```python
df.agg({'mpg':['median','mean'],'weight':['mean','std']})
```


Вывод:

|        | mpg       | weight      |
| ------ | --------- | ----------- |
| mean   | 23.514573 | 2970.424623 |
| median | 23.000000 | NaN         |
| std    | NaN       | 846.841774  |


## agg() с groupby()

```python
df.groupby('model_year').agg({'mpg':['median','mean'],'weight':['mean','std']})
```

Вывод: сгруппированная таблица по году , где нахождение среднего и медианы по полю **mpg** и среднее 
![[Pasted image 20241028155516.png]]