В библиотеке [[Pandas]], `xs` (cross-section) — это метод, который позволяет выбирать данные из [[DataFrame]] по определенному уровню индекса или столбца. Это особенно полезно, когда у вас есть многоуровневый индекс (MultiIndex) как в строках, так и в столбцах.
### Параметры метода `xs`:

- `key`: Значение, по которому производится выборка.
    
- `level`: Уровень индекса или столбца, по которому производится выборка.
    
- `axis`: Ось, по которой производится выборка (`0` для строк, `1` для столбцов).
    
- `drop_level`: Если `True`, удаляет уровни индекса, которые были использованы для выборки.
    

Использование `xs` позволяет гибко выбирать данные из [[DataFrame]] с многоуровневым индексом, что может быть очень полезно при работе с сложными наборами данных.


```python
import numpy as np
import pandas as pd  

if __name__ == "__main__":
    start = datetime.now()

    table = pd.read_csv(f"/mpg.csv")

    group_table = table.groupby(["model_year","cylinders"]).mean(numeric_only=True)

    print(group_table)

    print(group_table.loc[70, 6])

    print(group_table.xs(key=70, axis=0, level="model_year"))  # выборка по году выпуска

    print(group_table.xs(key=4, axis=0, level="cylinders"))  # Выборка по количеству целиндров

```

### Обратите внимание!

  
Имейте ввиду, что обычно гораздо проще отфильтровать данные **перед** вызовом функции groupby(), чем после. Например, намного проще удалить строки со значениями **cylinder=4** перед вызовом groupby(), а после это сделать уже сложнее.


```python
df[df['cylinders'].isin([6,8])].groupby(['model_year','cylinders']).mean()
```
Сортирует данные по количеству цилиндров (6 и 8) и после группирует их по году и количеству цилиндров и собирает средние значения